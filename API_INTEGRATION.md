# üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º

## –≠–Ω–¥–ø–æ–∏–Ω—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**POST** `/auth/telegram`

### –ó–∞–ø—Ä–æ—Å
```json
{
  "initData": "—Å—Ç—Ä–æ–∫–∞ initData –∏–∑ Telegram WebApp"
}
```

### –û—Ç–≤–µ—Ç

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω (201):**
```json
{
  "id": "1",
  "telegram_id": 123456789,
  "username": "testuser",
  "first_name": "Test",
  "last_name": "User",
  ...
}
```

**–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (200):**
```json
{
  "id": "1",
  "telegram_id": 123456789,
  "username": "testuser",
  "first_name": "Test",
  "last_name": "User",
  ...
}
```

### –û—à–∏–±–∫–∏

- **400** - `initData` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω
- **403** - –ù–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å `initData`

## –§–ª–æ—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å" –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
2. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç `initData` –∏–∑ `window.Telegram.WebApp.initData`
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ `/auth/telegram` —Å `initData`
4. –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –∏ —Å–æ–∑–¥–∞—ë—Ç/–ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **201** (created) ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/registration`
7. –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **200** (exists) ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/profile`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### URL –±—ç–∫–µ–Ω–¥–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://127.0.0.1:8000`

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
VITE_API_BASE_URL=http://127.0.0.1:8000 npm run dev
```

–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å `.env` —Ñ–∞–π–ª:
```
VITE_API_BASE_URL=http://127.0.0.1:8000
VITE_USE_API_MOCKS=false
```

### –ú–æ–∫-—Ä–µ–∂–∏–º
–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∏:
```
VITE_USE_API_MOCKS=true
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ initData

Telegram –ø–µ—Ä–µ–¥–∞—ë—Ç `initData` –≤ —Ñ–æ—Ä–º–∞—Ç–µ query string:
```
user=%7B%22id%22%3A123456789%2C%22first_name%22%3A%22Test%22%7D&hash=...
```

–ë—ç–∫–µ–Ω–¥ –ø–∞—Ä—Å–∏—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å —á–µ—Ä–µ–∑ `verify_init_data()`.

